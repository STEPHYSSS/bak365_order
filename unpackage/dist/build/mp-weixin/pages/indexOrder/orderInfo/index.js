(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/indexOrder/orderInfo/index"],{3804:function(n,e,t){"use strict";t.r(e);var o=t("d2c0"),a=t.n(o);for(var i in o)"default"!==i&&function(n){t.d(e,n,(function(){return o[n]}))}(i);e["default"]=a.a},"3c93":function(n,e,t){},"9ef1":function(n,e,t){"use strict";(function(n){t("abfe");o(t("66fd"));var e=o(t("faa8"));function o(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},b765:function(n,e,t){"use strict";var o=t("3c93"),a=t.n(o);a.a},d2c0:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(t("8732")),a=t("a2f1");function i(n){return n&&n.__esModule?n:{default:n}}var r=function(){t.e("components_uni/cmd-cell-item/cmd-cell-item").then(function(){return resolve(t("5e09"))}.bind(null,t)).catch(t.oe)},c=function(){t.e("components_uni/uni-popup/uni-popup").then(function(){return resolve(t("d6a2"))}.bind(null,t)).catch(t.oe)},u=function(){t.e("components_uni/uni-tag/uni-tag").then(function(){return resolve(t("f954"))}.bind(null,t)).catch(t.oe)},s=function(){Promise.all([t.e("common/vendor"),t.e("components/goodsBox/index")]).then(function(){return resolve(t("c364"))}.bind(null,t)).catch(t.oe)},d=getApp(),f={components:{cmdCellItem:r,uniPopup:c,uniTag:u,goodsBox:s},data:function(){return{orderList:[],orderId:"",orderInfo:{},payInfo:{},seatNumber:"",showPayType:!1,showInfo:!1,isWeix:"weixin"===d.globalData.provider,colorIndex:d.globalData.colorIndex,PayDisabled:!1,ActiveInfo:{}}},onLoad:function(n){this.orderId=n.id||"",this.seatNumber=d.globalData.tableNumber},methods:{setDecimalFun:function(n){return(0,a.setDecimal)(n)},getData:function(){var n=this;this.$showLoads(0,""),o.default.api("OrderDetail.aspx",{OrderID:this.orderId}).then((function(e){n.$showLoads(1,""),e.PayInfo.WX_CardBalance=Number(e.PayInfo.WX_CardBalance),e.OrderInfo.PayedAmt=Number(e.OrderInfo.PayedAmt),n.orderInfo=e.OrderInfo,n.orderList=e.ProdInfo,n.payInfo=e.PayInfo,n.ActiveInfo=e.ActiveInfo||{}})).catch((function(n){}))},bindCopy:function(){n.setClipboardData({data:this.orderInfo.OrderID,success:function(e){n.showToast({title:"复制成功"})}})},bindCallphone:function(e){var t=e,a=this.orderInfo.OrderID;if(1===t)"2"==this.payInfo.PrePayType||"3"==this.payInfo.PrePayType?this.weapPay():"1"===this.payInfo.PrePayType?this.cardPay():Number(this.payInfo.WX_CardBalance)<Number(this.orderInfo.PayedAmt)?this.weapPay():this.showPayType=!0;else{var i=this;n.showModal({title:"提示",content:"确定取消订单？",success:function(e){e.confirm?o.default.api("/Public/Submit_ajax.aspx",{Type:"OrderCancel",OrderID:a}).then((function(e){n.showToast({title:e.Msg,icon:"none"}),setTimeout((function(){i.getData()}),1e3)})).catch((function(n){})):e.cancel}})}},weapPay:function(){var n=this;if(!this.PayDisabled){this.PayDisabled=!0;var e=d.globalData.provider,t="weixin"===e?"/Public/WxPay/WxPay.aspx":"/Public/AliPay/AliPay.aspx";o.default.api(t,{OrderID:this.orderInfo.OrderID}).then((function(e){(0,a.weChatPayment)(d,n.orderInfo.OrderID,e),n.PayDisabled=!1})).catch((function(e){n.PayDisabled=!1,console.log(e,3333)})),this.showPayType=!1}},cardPay:function(){n.navigateTo({url:"../../indexCanteen/cardPayment/index?id="+this.orderInfo.OrderID+"&isOrder="+!0}),this.showPayType=!1},onClone:function(n){n.show||(this.showPayType=!1)},onCloneIncome:function(n){},IncomeFun:function(){var e=this;o.default.api("Public/Submit_ajax.aspx?Type=OrderTake",{OrderID:this.orderInfo.OrderID}).then((function(t){n.showToast({title:"确定收货成功！",icon:"none"}),setTimeout((function(){e.getData()}),1e3)})).catch((function(n){console.log(n,3333)}))},takeOverFun:function(){var e=this;n.showModal({title:"提示",content:"确定收货？",success:function(n){n.confirm?e.IncomeFun():n.cancel}})},deliveryCode:function(){},viewCollage:function(){var e=this.ActiveInfo.ActiveID,t=this.ActiveInfo.GroupNo;n.navigateTo({url:"/pages/indexCanteen/collage/info?ActiveID="+e+"&GroupNo="+t})}},onShow:function(){var n=this;d.globalData.openID?this.getData():this.$store.dispatch("Login").then((function(e){n.getData()}))}};e.default=f}).call(this,t("543d")["default"])},e98b:function(n,e,t){"use strict";var o,a=function(){var n=this,e=n.$createElement,t=(n._self._c,n.setDecimalFun(n.orderInfo.PayedAmt));n.$mp.data=Object.assign({},{$root:{m0:t}})},i=[];t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return o}))},faa8:function(n,e,t){"use strict";t.r(e);var o=t("e98b"),a=t("3804");for(var i in a)"default"!==i&&function(n){t.d(e,n,(function(){return a[n]}))}(i);t("b765");var r,c=t("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"42818aa0",null,!1,o["a"],r);e["default"]=u.exports}},[["9ef1","common/runtime","common/vendor"]]]);