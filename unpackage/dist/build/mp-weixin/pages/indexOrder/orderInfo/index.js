(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/indexOrder/orderInfo/index"],{1763:function(e,n,t){"use strict";t.r(n);var o=t("2de7"),a=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"2de7":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t("3955")),a=t("bf5e");function i(e){return e&&e.__esModule?e:{default:e}}var r=function(){t.e("components_uni/cmd-cell-item/cmd-cell-item").then(function(){return resolve(t("98e0"))}.bind(null,t)).catch(t.oe)},c=function(){t.e("components_uni/uni-popup/uni-popup").then(function(){return resolve(t("117d"))}.bind(null,t)).catch(t.oe)},u=function(){t.e("components_uni/uni-tag/uni-tag").then(function(){return resolve(t("ee31"))}.bind(null,t)).catch(t.oe)},s=function(){Promise.all([t.e("common/vendor"),t.e("components/goodsBox/index")]).then(function(){return resolve(t("b0d7"))}.bind(null,t)).catch(t.oe)},d=getApp(),f={components:{cmdCellItem:r,uniPopup:c,uniTag:u,goodsBox:s},data:function(){return{orderList:[],orderId:"",orderInfo:{},payInfo:{},seatNumber:"",showPayType:!1,showInfo:!1,isWeix:"weixin"===d.globalData.provider,colorIndex:d.globalData.colorIndex,PayDisabled:!1,ActiveInfo:{}}},onLoad:function(e){this.orderId=e.id||"",this.seatNumber=d.globalData.tableNumber},methods:{setDecimalFun:function(e){return(0,a.setDecimal)(e)},getData:function(){var e=this;this.$showLoads(0,""),o.default.api("OrderDetail.aspx",{OrderID:this.orderId}).then((function(n){e.$showLoads(1,""),n.PayInfo.WX_CardBalance=Number(n.PayInfo.WX_CardBalance),n.OrderInfo.PayedAmt=Number(n.OrderInfo.PayedAmt),e.orderInfo=n.OrderInfo,e.orderList=n.ProdInfo,e.payInfo=n.PayInfo,e.ActiveInfo=n.ActiveInfo||{}})).catch((function(e){}))},bindCopy:function(){e.setClipboardData({data:this.orderInfo.OrderID,success:function(n){e.showToast({title:"复制成功"})}})},bindCallphone:function(n){var t=n,a=this.orderInfo.OrderID;if(1===t)"2"==this.payInfo.PrePayType||"3"==this.payInfo.PrePayType?this.weapPay():"1"===this.payInfo.PrePayType?this.cardPay():Number(this.payInfo.WX_CardBalance)<Number(this.orderInfo.PayedAmt)?this.weapPay():this.showPayType=!0;else{var i=this;e.showModal({title:"提示",content:"确定取消订单？",success:function(n){n.confirm?o.default.api("/Public/Submit_ajax.aspx",{Type:"OrderCancel",OrderID:a}).then((function(n){e.showToast({title:n.Msg,icon:"none"}),setTimeout((function(){i.getData()}),1e3)})).catch((function(e){})):n.cancel}})}},weapPay:function(){var e=this;if(!this.PayDisabled){this.PayDisabled=!0;var n=d.globalData.provider,t="weixin"===n?"/Public/WxPay/WxPay.aspx":"/Public/AliPay/AliPay.aspx";o.default.api(t,{OrderID:this.orderInfo.OrderID}).then((function(n){(0,a.weChatPayment)(d,e.orderInfo.OrderID,n),e.PayDisabled=!1})).catch((function(n){e.PayDisabled=!1})),this.showPayType=!1}},cardPay:function(){e.navigateTo({url:"../../indexCanteen/cardPayment/index?id="+this.orderInfo.OrderID+"&isOrder="+!0}),this.showPayType=!1},onClone:function(e){e.show||(this.showPayType=!1)},onCloneIncome:function(e){},IncomeFun:function(){var n=this;o.default.api("Public/Submit_ajax.aspx?Type=OrderTake",{OrderID:this.orderInfo.OrderID}).then((function(t){e.showToast({title:"确定收货成功！",icon:"none"}),setTimeout((function(){n.getData()}),1e3)})).catch((function(n){e.showToast({title:n,icon:"none"})}))},takeOverFun:function(){var n=this;e.showModal({title:"提示",content:"确定收货？",success:function(e){e.confirm?n.IncomeFun():e.cancel}})},deliveryCode:function(){},viewCollage:function(){var n=this.ActiveInfo.ActiveID,t=this.ActiveInfo.GroupNo;e.navigateTo({url:"/pages/indexCanteen/collage/info?ActiveID="+n+"&GroupNo="+t})}},onShow:function(){var e=this;d.globalData.openID?this.getData():this.$store.dispatch("Login").then((function(n){e.getData()}))}};n.default=f}).call(this,t("543d")["default"])},"5e8a":function(e,n,t){"use strict";t.r(n);var o=t("a838"),a=t("1763");for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t("f468");var r,c=t("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"f2ec63a6",null,!1,o["a"],r);n["default"]=u.exports},a6b3:function(e,n,t){"use strict";(function(e){t("b895");o(t("66fd"));var n=o(t("5e8a"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},a838:function(e,n,t){"use strict";var o,a=function(){var e=this,n=e.$createElement,t=(e._self._c,e.setDecimalFun(e.orderInfo.PayedAmt));e.$mp.data=Object.assign({},{$root:{m0:t}})},i=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}))},cea9:function(e,n,t){},f468:function(e,n,t){"use strict";var o=t("cea9"),a=t.n(o);a.a}},[["a6b3","common/runtime","common/vendor"]]]);