(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/indexMain/index"],{"2cc1":function(e,o,t){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=a(t("3955")),i=t("bf5e");function a(e){return e&&e.__esModule?e:{default:e}}var r=function(){t.e("components_uni/uni-popup/uni-popup").then(function(){return resolve(t("117d"))}.bind(null,t)).catch(t.oe)},c=function(){t.e("components/poppupChangeOrder/index").then(function(){return resolve(t("cf70"))}.bind(null,t)).catch(t.oe)},u=getApp(),s={components:{uniPopup:r,changeStore:c},data:function(){return{CarouselImgInfo:[],imageSize:[],isShopNum:"",shopNo:"",currentStore:{},interval:3e3,circular:!0,judgeTimeT:(0,i.judgeTime)(),isShowCode:!1,colorIndex:u.globalData.colorIndex,colorItem:u.globalData.itemColor,provider:u.globalData.provider,location:{},clickShow:!1,radio:"1",current:0,showDiscount:!1,couponList:[],activeImg:"",SendProgInfo:{},loading:!1,isChangeStore:!1,modeChange:{},isweixin:"",ActiveID:""}},methods:{clickText:function(){e.navigateTo({url:"/pages/indexCanteen/goodInfo/index?ProdNo=113340"})},getArea:function(){var o=this;n.default.api("ShopInfo.aspx",this.location).then((function(t){if(o.currentStore=t.ShopInfo[0],!u.globalData.shopNo&&o.location.Latitude){var n=o;e.showModal({title:"选择门店",content:n.currentStore.ShopName+(n.currentStore.ShopAddress?"-":"")+n.currentStore.ShopAddress,success:function(e){e.confirm?(n.isChangeStore=!0,u.globalData.shopNo=n.currentStore.ShopNo):e.cancel}})}o.getObj(t.ShopInfo[0].ShopNo)})).catch((function(e){}))},getObj:function(e){var o=this;this.$showLoads(0);var t="weixin"===this.provider?1:2;n.default.api("NewIndex.aspx",{ShopNo:e||this.shopNo,Source:t}).then((function(e){(0,i.setTime)(e.SendProgInfo.ProgDetail),o.ActiveID=e.ActiveID,o.CarouselImgInfo=e.CarouselImgInfo,o.isShowCode=e.IsShowCardCode,o.currentStore=e.ShopInfo,o.couponList=e.SendProgInfo.ProgDetail||[],o.SendProgInfo=e.SendProgInfo,o.modeChange={LogisticsDistribution:e.WX_LogisticsDistribution,OrderEatInStore:e.WX_OrderEatInStore,OrderEatPackAway:e.WX_OrderEatPackAway,WXSmallProgramKf:e.WX_SmallProgramKf},!u.globalData.isDraw&&e.SendProgInfo.ProgDetail.length>0&&(o.showDiscount=!0),o.$showLoads(1),o.loading=!0})).catch((function(e){}))},swiperImageLoad:function(e,o){e.detail.width,e.detail.height},startOrder:function(){var o=this.modeChange.LogisticsDistribution,t=this.modeChange.OrderEatInStore,n=this.modeChange.OrderEatPackAway,a=(0,i.setModeIf)(o,t,n);if(this.isShopNum||this.isChangeStore)a.bool&&!u.globalData.isPack?this.clickShow=!0:(a.currentMode&&(u.globalData.isPack=a.currentMode),e.switchTab({url:"/pages/indexCanteen/index"}));else if(u.globalData.shopNo){if(!u.globalData.isPack&&a.bool)return void(this.clickShow=!0);e.switchTab({url:"/pages/indexCanteen/index"})}else e.navigateTo({url:"../indexCanteen/changeStore/index"})},onClose:function(e){e||(this.clickShow=!1)},onChangeStore:function(e){for(var o=0;o<this.items.length;o++)if(1===e.target.value){this.current=o;break}},changeMode:function(o){this.clickShow=!1,e.switchTab({url:"/pages/indexCanteen/index"})},clickMyCode:function(){e.navigateTo({url:"./vipQRCode/index"})},clickMyOrder:function(){e.switchTab({url:"/pages/indexOrder/oderList/index"})},clickMyVip:function(){e.switchTab({url:"/pages/indexVip/index"})},clickMyCoupon:function(){e.navigateTo({url:"../indexVip/couponList/index"})},clickMyActive:function(){e.navigateTo({url:"/pages/indexCanteen/flashSale/index?ActiveID="+this.ActiveID})},closeDiscount:function(){this.showDiscount=!1,u.globalData.isDraw=!0},centerStoreChange:function(){},storeChangeFun:function(){},clickNearbyStore:function(){e.navigateTo({url:"../indexCanteen/changeStore/index?isNearby=true"})},handleContact:function(){}},onShareAppMessage:function(){return{title:"台位点单",path:"/pages/indexCanteen/index"}},onLoad:function(o){this.ActiveID=o.options;var t=o.q?decodeURIComponent(o.q):"",n={};if(t){var i=t.slice(t.indexOf("?"));i=i.substr(1);var a=i.split("&");a.forEach((function(e){var o=e.split("=")[0];n[o]=e.split("=")[1]}))}else n={};var r=this;n.ShopNo&&(this.isShopNum=!0,u.globalData.shopNo=n.ShopNo),this.shopNo=n.ShopNo||"",n.TableNumber&&(u.globalData.tableNumber=n.TableNumber||""),u.globalData.shopNo&&(this.shopNo=u.globalData.shopNo),o.currentShop&&(this.currentStore=JSON.parse(o.currentShop),this.shopNo=this.currentStore.ShopNo,打包的时候注释掉),e.removeStorageSync("shopLocation"),e.getLocation({type:"wgs84",success:function(o){o.latitude,o.longitude;e.setStorageSync("location",{latitude:o.latitude,longitude:o.longitude}),r.location={Latitude:o.latitude,Longitude:o.longitude}},fail:function(){},complete:function(){u.globalData.openID?(l(u,r),r.isweixin="weixin"===u.globalData.provider):r.$store.dispatch("Login").then((function(e){l(u,r),r.isweixin="weixin"===u.globalData.provider}))}})},onShow:function(){!u.globalData.isDraw&&this.couponList.length>0&&(this.showDiscount=!0)},watch:{currentStore:function(o){o&&"{}"!==JSON.stringify(o)&&(e.setStorageSync("shopLocation",{latitude:this.currentStore.Latitude||"",longitude:this.currentStore.Longitude||""}),e.setStorageSync("shopLocationName",this.currentStore.ShopName))}}};function l(e,o){o.shopNo?(o.isShopNum=!0,o.getObj()):(o.getArea(),o.isShopNum=!1)}o.default=s}).call(this,t("543d")["default"])},"2eb6":function(e,o,t){},4966:function(e,o,t){"use strict";(function(e){t("b895");n(t("66fd"));var o=n(t("ec30"));function n(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,t("543d")["createPage"])},6984:function(e,o,t){"use strict";var n,i=function(){var e=this,o=e.$createElement;e._self._c},a=[];t.d(o,"b",(function(){return i})),t.d(o,"c",(function(){return a})),t.d(o,"a",(function(){return n}))},b24f:function(e,o,t){"use strict";var n=t("2eb6"),i=t.n(n);i.a},c8ab:function(e,o,t){"use strict";t.r(o);var n=t("2cc1"),i=t.n(n);for(var a in n)"default"!==a&&function(e){t.d(o,e,(function(){return n[e]}))}(a);o["default"]=i.a},ec30:function(e,o,t){"use strict";t.r(o);var n=t("6984"),i=t("c8ab");for(var a in i)"default"!==a&&function(e){t.d(o,e,(function(){return i[e]}))}(a);t("b24f");var r,c=t("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"3225ca89",null,!1,n["a"],r);o["default"]=u.exports}},[["4966","common/runtime","common/vendor"]]]);