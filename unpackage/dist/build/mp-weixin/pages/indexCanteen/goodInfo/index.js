(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/indexCanteen/goodInfo/index"],{"1bf8":function(t,e,n){"use strict";(function(t){n("b895");o(n("66fd"));var e=o(n("ecc5"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"378f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("3955"));function a(t){return t&&t.__esModule?t:{default:t}}var r=n("bf5e"),i=function(){Promise.all([n.e("common/vendor"),n.e("components/stepperCard/index")]).then(function(){return resolve(n("32e4"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/bottomSubmit/index").then(function(){return resolve(n("d78a"))}.bind(null,n)).catch(n.oe)},u=function(){Promise.all([n.e("common/vendor"),n.e("components_uni/gaoyia-parse/parse")]).then(function(){return resolve(n("ec1a"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/customerService/index").then(function(){return resolve(n("9797"))}.bind(null,n)).catch(n.oe)},d=getApp(),l={components:{stepperCard:i,bottomSubmit:s,uParse:u,btnService:c},data:function(){return{keyImage:0,imgUrls:[],autoplay:!0,interval:3e3,duration:800,goodInfo:{},article:"",cartLists:[],imageSize:[],addNum:0,allMoney:0,ProdNo:"",windowWidth:0,provider:""}},onShareAppMessage:function(){return{title:this.goodInfo.ProdName,path:"pages/indexCanteen/goodInfo/index?ProdNo="+this.goodInfo.ProdNo}},methods:{setDecimalFun:function(t){return r.setDecimal(t)},getInfo:function(){var e=this;this.provider=d.globalData.provider;var n=this;o.default.api("ProdItem.aspx",{ProdNo:this.ProdNo||""}).then((function(o){e.goodInfo=o,e.article=o.FeaturesHtmlInfo;var a=t.getStorageSync("cartList"),r=0,i=0;if(a&&a.length>0)for(var s=a.slice(),u=0;u<s.length;u++){var c=s[u];n.goodInfo.ProdNo===c.ProdNo&&(n.goodInfo.num=c.num,c.hasOwnProperty("showStepper")&&(n.goodInfo.showStepper=c.showStepper)),r+=Number(c.num)*Number(c.SalePrice),i+=Number(c.num),0===Number(c.num)&&a.splice(u,1)}r=parseFloat(r.toFixed(2)),n.cartLists=a,n.allMoney=r,n.addNum=i})).catch((function(t){}))},mycurrentPage:function(t){var e=this,n=r.setCard(t);this.allMoney=0,this.addNum=0;for(var o=0;o<n.length;o++){var a=n[o];this.allMoney+=Number(a.num)*Number(a.SalePrice),this.addNum+=Number(a.num)}this.allMoney=parseFloat(this.allMoney.toFixed(2)),this.cartLists=n,this.addNum=n.length>0?this.addNum:0,this.allMoney=n.length>0?this.allMoney:0,this.cartLists.length>0&&this.cartLists.forEach((function(t){t.ProdNo==e.goodInfo.ProdNo&&0==t.num&&(e.goodInfo.showStepper=!1)}))},setShowStepper:function(t){this.goodInfo.showStepper=t},setCartList:function(e,n){this.cartLists[n].num=e,this.cartLists[n].prodPartsInfo.forEach((function(t){t.num=e})),r.controlPartsStock(this,n);var o=this,a=this.cartLists;o.allMoney=0,o.addNum=0;for(var i=0;i<a.length;i++){var s=a[i];Number(s.ProdNo)===Number(o.goodInfo.ProdNo)&&(o.goodInfo.num=s.num),o.allMoney+=Number(s.num)*Number(s.SalePrice),o.addNum+=Number(s.num)}for(i=0;i<a.length;i++){var u=a[i];Number(0===u.num)&&a.splice(i,1)}this.$nextTick((function(){o.allMoney=parseFloat(o.allMoney.toFixed(2)),o.cartLists=a,o.addNum=a.length>0?o.addNum:0,o.allMoney=a.length>0?o.allMoney:0})),t.setStorage({key:"cartList",data:a})},clickClear:function(){this.goodInfo.num=0,this.cartLists=[],this.addNum=0,this.allMoney=0,t.setStorage({key:"cartList",data:[]})},determine:function(){t.navigateTo({url:"../paymentOrder/index"})},swiperImageLoad:function(t,e){++this.keyImage}},onLoad:function(e){var n=this;this.ProdNo=e.ProdNo;var o=t.getSystemInfoSync(),a=o.windowWidth;o.windowHeight;this.windowWidth=a,d.globalData.shopNo&&d.globalData.isPack||t.reLaunch({url:"/pages/indexCanteen/changeStore/index?goodInfo="+this.ProdNo}),d.globalData.openID?this.getInfo():this.$store.dispatch("Login").then((function(t){n.getInfo()}))},onShow:function(){t.getStorageSync("cartList")&&0!==t.getStorageSync("cartList").length||(this.cartLists=[],this.allMoney=0,this.goodInfo.num=0)}};e.default=l}).call(this,n("543d")["default"])},"64d2":function(t,e,n){"use strict";var o,a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.setDecimalFun(t.goodInfo.SalePrice));t.$mp.data=Object.assign({},{$root:{m0:n}})},r=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},"9c26":function(t,e,n){"use strict";var o=n("d8d7"),a=n.n(o);a.a},d8d7:function(t,e,n){},ebe9:function(t,e,n){"use strict";n.r(e);var o=n("378f"),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=a.a},ecc5:function(t,e,n){"use strict";n.r(e);var o=n("64d2"),a=n("ebe9");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("9c26");var i,s=n("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=u.exports}},[["1bf8","common/runtime","common/vendor"]]]);